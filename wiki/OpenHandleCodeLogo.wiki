#summary Logo code examples for OpenHandle

[OpenHandleCodeExamples Code Examples]
== OpenHandle Logo Code Examples ==

These examples use [http://www.alancsmith.co.uk/logo/ ACSLogo] for MacOS X. Logo does not have system calls so cannot fetch an OpenHandle decsription, but it can read from a disk file.

Here's how [http://www.alancsmith.co.uk/logo/ ACSLogo] can process a Logo program (contained in file 
"[http://nurture.nature.com/tony/openhandle/code/logo/openhandle.acsl
openhandle.acsl]" with text export at "[http://nurture.nature.com/tony/openhandle/code/logo/openhandle.acsl.txt openhandle.acsl.txt]" - for working offline a test handle data record is read from the file "[http://nurture.nature.com/tony/openhandle/code/logo/h.json h.json]")
can grab a handle data record:
{{{
% cat openhandle.acsl.txt

make "json  [/Users/tony/Desktop/h.json]
readhandle


Define "NoQuotes[[string][butlast butfirst :string

// if member? "" :string
//  [ butlast butfirst :string ]
//  [ :string ]]]
Define "GetLines[[][if eof?
  []
  [
    make "line freadlist
    if (count :line) > 0
      [
        make "col pencolor
        grtype :line back :leading 
        make "word first :line
        if member? "" :word
          [make "key noquotes :word]
          [make "key :word]
        setpencolor 3
        if equal? :key "handle
          [ make "handle noquotes last butlast :line ]
          []
        if equal? :key "index
          [ make "values :values + 1 
          make "listing lastput "@ :listing
          make "valuesline (list "value ". (word "" :values "") ",)
          print :valuesline
          addline "value :valuesline
          addline :key :line ]
          []
        if equal? :key "type
          [ addline :key :line ][]
        if equal? :key "data
         [ addline :key :line ][]
        if equal? :key "permission
          [ addline :key :line ][]
        if equal? :key "ttl
          [ addline :key :line ][]
        if equal? :key "timestamp
          [ addline :key :line ][]
        if equal? :key "reference
          [ addline :key :line ][]
        setpencolor :col
        getlines
      ]
    []
  ]]]
Define "Concat[[object list][make "list lastput :object :list]]
Define "AddLine[[key line][local "temp
local "value
if member? "@ :line
[
  make "temp []
]
[
if member? "{ :line
[
  make "temp (list char 32 char 32 :key char 61 "[]) 
]
[
if member? "{} :line
[
  make "temp (list char 32 char 32 :key char 61 "[]) 
]
[
  make "value butlast butfirst butfirst :line
if equal? :key "value
[
  make "temp (list :key (word "# noquotes first :value)) 
]
[
  make "temp (list char 32 char 32 :key char 61 noquotes first :value) 
]
]
]
]
make "listing lastput :temp :listing]]
Define "PrintLines[[list][local "head
local "tail
if empty? :list
[]
[
  make "head first :list
  make "tail butfirst :list
if member? "@ :head
[ moveline 
]
[ grtype :head
  moveline
  ]
  printlines :tail
]
]]
Define "While[[action condition][local "result
make "result run :condition
if :result
   [
	run :actions
	while :condition :actions
   ]
   [
   ]]]
Define "Join[[list string][local "head
local "tail
print :list
print count :list

while (count :list > 0) 
[
  make "head first :list
  make "tail butfirst :list
  make "string (word :string :head)
  if (count :list > 1)
  [
    make "string (word :string char 32)
  ]
  []
  join :tail :string
]]]
Define "MoveLine[[][if equal? :moveline_action "linear
[
  back 15
]
[
  if equal? :moveline_action "radial
  [
    right 15
  ]
  []
]]]
Define "ReadHandle[[][//
cs home setpc 1 pu
forward 400 left 90 forward 250 right 90
make "listing []
make "handle ""
make "values 0
make "moveline_action "radial
// make "moveline_action "linear
//
openread :json
getlines
closereadfile
//
if equal? :moveline_action "radial
[
home
back 50
left 60
]
[]
setshadow [1 -1.5 .25 1]
setshadow []
setpc 8
moveline
make "msg (list "The "handle (word char 60 :handle char 62) "has :values (word "values char 58))
grtype :msg
moveline
printlines :listing 
setshadow []]]
}}}

http://nurture.nature.com/tony/imx/openhandle_logo_linear.jpg

http://nurture.nature.com/tony/imx/openhandle_logo_radial.jpg