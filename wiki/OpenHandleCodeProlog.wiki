#summary Prolog code examples for OpenHandle

[OpenHandleCodeExamples Code Examples]
== OpenHandle Prolog Code Examples ==

Here's how [http://www.swi-prolog.org/ SWI-Prolog] can process a Prolog program (contained in file "[http://nurture.nature.com/tony/openhandle/code/prolog/openhandle.pro openhandle.pro]") and grab a handle data record:
{{{
% cat openhandle.pro
#!/opt/local/bin/swipl -q -t main -f

:- use_module(library('http/http_open')).
:- use_module(library('http/json')).

eval :-
    BaseUrl = 'http://nascent.nature.com/openhandle/handle?format=json&id=',
    current_prolog_flag(argv, Argv),
    append(_, [--|Args], Argv),
    concat_atom(Args, ' ', Handle),
    concat_atom([BaseUrl, Handle], OpenHandle),
    http_open(OpenHandle, In, []),
    json_read(In, JSON),
    close(In),
    write(JSON),
    nl.

main :-
    catch(eval, E, (print_message(error, E), fail)),
    halt.

main :-
    halt(1).
}}}

Running this gives the following:
{{{
% openhandle.pro 10100/nature
json([comment=OpenHandle (JSON) - see http://openhandle.googlecode.com/, handle=hdl:10100/nature, handleValues=[json([index=100, type=HS_ADMIN,
data=json([adminRef=hdl:10100/nature?index=100, adminPermission=111111111111]), permission=1110, ttl= +86400, timestamp=Wed Feb 28 15:37:06 GMT 2007, reference=[]]),
json([index=1, type=URL, data=http://www.nature.com/, permission=1110, ttl= +86400, timestamp=Wed Feb 28 15:37:06 GMT 2007, reference=[]])]])
}}}

This should be taken a step further using the '`http/json_convert`' module to read the Prolog term and walk that object to provide the standard listing given in the other code examples. 